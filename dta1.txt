function processData(csvData) {
  const parsedData = Papa.parse(csvData, { header: true, skipEmptyLines: true });
  const df = parsedData.data;

  // Initialize objects to store total debit and credit for merchants and platforms
  const merchantDebits = {};
  const merchantCredits = {};
  const platformDebits = {};
  const platformCredits = {};

  // Loop through the data to calculate debit and credit for each merchant and platform
  df.forEach((row) => {
    const merchant = row['Merchant'] || row['Platform'];
    const amount = parseFloat(row['AMOUNT']);

    if (amount < 0) {
      if (merchantDebits[merchant] === undefined) {
        merchantDebits[merchant] = 0;
      }
      merchantDebits[merchant] += amount;

      if (platformDebits[row['Platform']] === undefined) {
        platformDebits[row['Platform']] = 0;
      }
      platformDebits[row['Platform']] += amount;
    } else {
      if (merchantCredits[merchant] === undefined) {
        merchantCredits[merchant] = 0;
      }
      merchantCredits[merchant] += amount;

      if (platformCredits[row['Platform']] === undefined) {
        platformCredits[row['Platform']] = 0;
      }
      platformCredits[row['Platform']] += amount;
    }
  });

  // Separate merchants and platforms
  const merchants = Object.keys(merchantDebits);
  const platforms = Object.keys(platformDebits);

  // Calculate the total debit and credit amounts for each merchant and platform
  const merchantDebitAmounts = merchants.map((merchant) => merchantDebits[merchant]);
  const merchantCreditAmounts = merchants.map((merchant) => merchantCredits[merchant]);
  const platformDebitAmounts = platforms.map((platform) => platformDebits[platform]);
  const platformCreditAmounts = platforms.map((platform) => platformCredits[platform]);

  // Create charts or perform other actions using the calculated data
  // ...

  // Example: Create a bar chart for merchant debit and credit
  const ctx = document.getElementById('merchantChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: merchants,
      datasets: [
        {
          label: 'Debit',
          data: merchantDebitAmounts,
          backgroundColor: '#C51605',
        },
        {
          label: 'Credit',
          data: merchantCreditAmounts,
          backgroundColor: '#7C73C0',
        },
      ],
    },
    options: {
      // Set your options here
    },
  });

  // Example: Create a bar chart for platform debit and credit
  const ctx2 = document.getElementById('platformChart').getContext('2d');
  new Chart(ctx2, {
    type: 'bar',
    data: {
      labels: platforms,
      datasets: [
        {
          label: 'Debit',
          data: platformDebitAmounts,
          backgroundColor: '#C51605',
        },
        {
          label: 'Credit',
          data: platformCreditAmounts,
          backgroundColor: '#7C73C0',
        },
      ],
    },
    options: {
      // Set your options here
    },
  });
}

// Rest of your code remains the same
